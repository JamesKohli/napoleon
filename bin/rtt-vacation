#!/bin/bash

if [ -n "$1" ]
then
	USER=$(sqlite3 db "select user_id from users where name='$1'")
	if [ -z "$USER" ]
	then
		echo "user not found"
		exit 1
	fi

	if [ -n "$2" ]
	then
		sqlite3 db "update user_vacation set vacation=vacation+$2 where user_id=$USER"
	fi

	sqlite3 db -table "select name,vacation from users join user_vacation using(user_id) where user_id=$USER"
else
	echo "usage: rtt-vacation USER [ DAYS ]"
fi
